/* Alert Styling */
/* Highlight for currently spoken word */
/* Ensure translated words are inline for paragraph flow */
.trans-word {
    display: inline;
}
/* Make current word highlight more prominent */
.trans-word.current-highlight {
    background-color: #90caf9; /* Deeper blue */
    border-radius: 4px;
    transition: background 0.2s;
    font-weight: bold;
    color: #0d47a1;
    box-shadow: 0 2px 8px rgba(33,150,243,0.12);
}

/* Highlight for previous words (lighter blue) */
.trans-word.prev-highlight {
    background-color: #e6f2ff; /* Even lighter blue */
    border-radius: 4px;
    transition: background 0.2s;
}

/* Original text word highlighting with black text */
.trans-word-original {
    display: inline;
}
.trans-word-original.current-highlight {
    background-color: #ffe082; /* Amber */
    border-radius: 4px;
    transition: background 0.2s;
    font-weight: 600;
    color: #7a4e00; /* dark amber text */
    box-shadow: 0 2px 6px rgba(255,193,7,0.25);
}
.trans-word-original.prev-highlight {
    background-color: #fff8e1; /* Light amber */
    border-radius: 4px;
    transition: background 0.2s;
}

/* static/style.css */

body {
    background-color: #f8f9fa; /* Light grey background */
    padding-top: 56px; /* Adjust if navbar height changes - THIS IS IMPORTANT FOR FIXED NAVBAR */
    padding-bottom: 3rem; /* Add space before footer */
}

/* Customize navbar further if needed */

.navbar-brand {
    font-weight: bold;
}

/* Main Form Card Styling */
.card.shadow-sm {
    transition: box-shadow 0.3s ease-in-out;
}

.card.shadow-sm:hover {
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
}

.form-select-lg {
    font-size: 1.1rem; /* Slightly larger select dropdowns */
}

textarea.form-control {
    resize: vertical; /* Allow vertical resize only */
}

/* Result Boxes Styling */
.result-box {
    background-color: #ffffff; /* White background for readability */
    border: 1px solid #e9ecef; /* Softer border */
    border-radius: 0.25rem;
    padding: 1rem;
    min-height: 150px; /* Ensure a minimum height */
    white-space: pre-wrap; /* Preserve whitespace and wrap lines */
    word-wrap: break-word; /* Break long words */
    overflow-y: auto; /* Add scroll if content overflows */
    max-height: 400px; /* Prevent excessively tall boxes */
}

/* Compact variation for minimal whitespace */
.result-box.compact {
    padding: 0.75rem 0.9rem;
    min-height: unset;
}

/* Extra tight variant for single short sentences */
.result-box.compact.tight { 
    padding: 0.4rem 0.6rem; /* Further reduced padding */
}

/* Balanced variant: centered text with consistent inner spacing */
.result-box.balanced {
    padding: 0.5rem 1rem 0.55rem 1rem; /* tighter top and balanced bottom */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}
.result-box.balanced .result-text-area {
    /* Remove forced centering; JS will decide if centering is appropriate for very short single-line content */
    width: 100%;
    margin: 0 auto;
}


.result-box-small { /* For smaller text boxes in accordion */
    min-height: 60px;    /* Optional: ensure a minimum space even for short text */
    max-height: 150px;   /* <<< Crucial: Set a maximum height for the box */
    overflow-y: auto;  /* <<< Crucial: Add vertical scrollbar if content overflows */
    font-size: 0.9em;    /* Existing: Match accordion body font size */
    padding: 0.5rem;     /* Optional: Add some padding inside the scrollable box */
    border: 1px solid #e9ecef; /* Optional: Add a light border like other result boxes */
    border-radius: 0.25rem; /* Optional: Rounded corners */
    background-color: #f8f9fa; /* Optional: Light background for the text area */
    white-space: pre-wrap; /* Ensures text wraps and newlines are preserved */
    word-wrap: break-word; /* Breaks long words to prevent horizontal overflow */
}


.card .card-header {
    font-weight: 500; /* Slightly bolder headers */
}

/* TTS Button and Player (General) */
.card-footer {
    border-top: 1px solid #e9ecef;
}

/* #ttsAudio { */ /* This ID is too specific, audio players have unique IDs now */
    /* max-width: 100%; */ /* Ensure audio player fits - better to style the wrapper or audio tag directly */
/* } */

/* Activity Log Styling */
/* .list-group-item {  This was for an older log style, accordion is used now
    border-color: #e9ecef;
    Match border colors
} */
/* .list-group-item h6 .badge {
    vertical-align: middle;
} */

/* .list-group-item p {
    font-size: 0.9em;
    color: #6c757d; 
} */
/* Removed empty ruleset for .list-group-item p .badge */

/* Accordion body text if needed */
.accordion-body .small {
    font-size: 0.9em; /* Ensure consistent small text */
}


/* Footer Styling */
footer {
    border-top: 1px solid #e9ecef;
}

/* Helper class for slight fade effect on hover (optional) */
.hover-fade {
    transition: opacity 0.2s ease-in-out;
}
.hover-fade:hover {
    opacity: 0.85;
}

/* Ensure results columns stack properly on small screens */
@media (max-width: 767.98px) {
    .result-box {
        min-height: 120px; /* Slightly smaller min-height on mobile */
    }
    .custom-audio-controls-wrapper {
        flex-wrap: wrap; /* Allow controls to wrap on very small screens */
        justify-content: center; /* Center them when wrapped */
    }
    .custom-audio-controls-wrapper audio {
        min-width: 100%; /* Make audio take full width when wrapped */
        margin-left: 0;
        margin-right: 0;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
        order: 0; /* Ensure audio is visually between buttons or as desired */
    }
    .player-skip-btn {
        margin-bottom: 0.25em; /* Add some space if buttons wrap */
    }
    .custom-audio-controls-wrapper .dropdown {
        margin-left: 0; /* Reset margin for wrapped state */
    }
}

/* --- NEW/MODIFIED STYLES FOR CUSTOM AUDIO CONTROLS --- */
.custom-audio-controls-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5em; /* Space between elements */
    margin-top: 0.5rem; /* Space above the control bar */
    width: 100%; /* Take full available width */
    flex-wrap: nowrap; /* Default to no wrap */
    justify-content: center; /* Center the items if they don't fill the width */
}

.custom-audio-controls-wrapper audio {
    flex-grow: 1; /* Allows the audio element to take up most of the space */
    min-width: 120px;
    max-width: 300px; /* Max width for the audio player itself */
    margin-left: 0.5em;
    margin-right: 0.5em;
    background: transparent; /* Try to make native player less obtrusive */
    /* Attempt to style default controls - very browser dependent */
    border-radius: 25px; /* For the audio element itself, if visible */
    /* box-shadow: 0 2px 5px rgba(0,0,0,0.1); */
}

/* Attempt to style WebKit (Chrome, Safari, Edge) native controls */
.custom-audio-controls-wrapper audio::-webkit-media-controls-panel {
    background-color: #f8f9fa; /* Light background for the panel */
    border-radius: 20px; /* Rounded corners for the panel */
    padding: 5px;
    /* box-shadow: inset 0 0 5px rgba(0,0,0,0.05); */
}
/* Removed empty ruleset for WebKit media controls selectors */


.player-skip-btn {
    background-color: #f0f0f0; /* Lighter grey for a softer look */
    border: 1px solid #d7d7d7; /* Slightly softer border */
    color: #333;
    font-size: 1em;
    width: 42px;    /* Slightly larger for touch */
    height: 42px;
    border-radius: 50%; /* Circle */
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Ensure the success alert is visible and above other content */
.translation-alert-fixed {
    position: fixed;
    top: 32px;
    right: 32px;
    z-index: 1055; /* Above modal and navbar */
    width: auto;
    max-width: 350px;
    pointer-events: none;
    left: auto;
    transform: none;
    box-shadow: none !important;
}
.translation-alert-fixed .alert {
    opacity: 1 !important;
    box-shadow: none !important;
    padding: 0.6rem 1.2rem;
    line-height: 1.2;
    font-size: 1.08rem;
    font-weight: 600;
    margin-bottom: 0;
    letter-spacing: 0.01em;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 0.7rem;
    padding-right: 2.2em;
    min-height: 2.2em;
    position: relative;
    pointer-events: auto;
}
.translation-alert-fixed .alert-success {
    background-color: #d1e7dd !important;
    color: #0f5132 !important;
    border: 1px solid #badbcc !important;
    box-shadow: none !important;
}

/* --- Result Cards Layout Cleanup --- */
.result-card {
    display: flex;
    flex-direction: column;
}

/* Unified equal-height styling */
.equal-height-row .result-card.unified { display:flex; }
.equal-height-row .result-card.unified .result-box { flex:1 1 auto; }
.placeholder-footer { line-height:0; font-size:0; }

/* Prevent a card from stretching to equal height when not desired */
.no-stretch { height: auto !important; }
.no-stretch .result-box { max-height: none; }

/* Make both result cards visually same height while content is short */
.row.g-4 > [class*='col-'] > .card.no-stretch { display:flex; flex-direction:column; }
.row.g-4 > [class*='col-'] > .card.no-stretch .result-box { flex:1 1 auto; }
.result-card .card-body.result-box {
    flex: 1 1 auto;
    display: block;
    background: #fff;
    overflow-y: auto;
}
.result-text-area {
    white-space: pre-wrap;
    word-break: break-word;
    font-size: 1.02rem;
    line-height: 1.45;
    text-align: left; /* default left; JS may center */
    min-height: 60px; /* tighter */
    margin: 0;
}

/* When we want full vertical & horizontal centering for short content */
.result-box.balanced.center-active { justify-content: center; }
.result-box.balanced.center-active .result-text-area { text-align: center; }

/* Always center mode (overrides adaptive) */
.result-box.force-center { justify-content: flex-start !important; }
.result-box.force-center .result-text-area { text-align: center !important; }

/* If text-center applied, ensure consistent wrapping */
.result-text-area.text-center { text-align: center; }

/* Optional vertical + horizontal centering utility (not forced) */
.result-text-area.center-both {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.compact .result-text-area,
.result-box.compact .result-text-area {
    min-height: 48px;
    line-height: 1.38;
    font-size: 1.0rem;
}

/* Keep both boxes the same height visually when side by side */
@media (min-width: 992px) { /* lg and up */
    .row .result-card { height: 100%; }
}

/* Remove excessive padding on very small screens */
@media (max-width: 575.98px) {
    .result-text-area { font-size: 1rem; }
}

.player-skip-btn:hover {
    background-color: #e0e0e0;
    /* box-shadow: 0 2px 5px rgba(0,0,0,0.15); */
}
.player-skip-btn:active {
    background-color: #d0d0d0; /* Active press feedback */
    transform: scale(0.96);
}
.player-skip-btn .skip-interval-label-adjacent {
    font-size: 0.85em; /* Smaller, distinct number */
    font-weight: 600; /* Semi-bold */
    margin-right: 2px; /* Tiny space if needed */
    color: #555;
}
.player-skip-btn .bi { /* Bootstrap Icon within the button */
    font-size: 1.3em; /* Adjust icon size relative to button */
    vertical-align: middle; /* Helps with alignment */
}

/* Styling for the 3-dot menu button if it uses player-skip-btn class */
.custom-audio-controls-wrapper .dropdown .player-skip-btn .bi-three-dots-vertical {
     font-size: 1.3em; /* Ensure icon size consistency */
}

.custom-audio-controls-wrapper .dropdown-menu {
    min-width: 120px; /* Ensure dropdown has enough width for items */
    font-size: 0.9em;
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15); /* Add shadow to dropdown */
    border-radius: 0.3rem;
    z-index: 4000; /* ensure on top of audio controls */
    margin-top: 4px;
}
.custom-audio-controls-wrapper .dropdown-item {
    padding: 0.35rem 1rem; /* Adjust padding for dropdown items */
}
.custom-audio-controls-wrapper .dropdown-item:active {
    background-color: #0d6efd; /* Bootstrap primary for active item */
    color: white;
}
/* Fallback visibility when manually toggling .show without Bootstrap positioning adjustments */
.custom-audio-controls-wrapper .dropdown .dropdown-menu:not([style]) { position: absolute; }
.custom-audio-controls-wrapper .dropdown { position: relative; }
.custom-audio-controls-wrapper .dropdown-menu.show { display: block; }